!function(e){"use strict";var a=function(){function e(a,t,i){babelHelpers.classCallCheck(this,e),this.player=a,this.config=t,this.sdk=i,this.data=Object.assign({player_software_name:"AMP",player_software_version:a.version,player_mux_plugin_name:"amp-mux",player_mux_plugin_version:"1.66.0",player_init_time:a.initTime},t.data);var r=a.container;a.addEventListener("ready",function(e){function t(e,a,t){for(var d in a)e.addEventListener(a[d],function(e,a,r){!t&&n.getInProgress()||(/timeupdate/.test(a)||console.log("mux.emit",a),i.emit(e,a))}.bind(null,r,d))}var n=a.ads||{getEnabled:function(){return!1},getInProgress:function(){return!1}};t(a,{play:"play",playing:"playing",pause:"pause",timeupdate:"timeupdate",seeking:"seeking",seeked:"seeked",error:"error",ended:"ended",stalled:"stalled"}),a.addEventListener("mediachange",function(e){var a=e.detail;console.log("mux.emit","videochange"),i.emit(r,"videochange",{video_id:a.guid,video_title:a.title,video_duration:a.duration,video_is_live:"live"==a.temporalType,video_poster_url:a.poster,video_source_url:a.src,video_source_mime_type:a.type})}),n.getEnabled()&&(t(n,{adrequest:"request",adresponse:"response",adbreakstart:"breakstart",adplay:"play",adplaying:"playing",adpause:"pause",adfirstquartile:"firstquartile",admidpoint:"midpoint",adthirdquartile:"thirdquartile",adended:"ended",adbreakend:"breakend",aderror:"error"},!0),t(n,{adplay:"breakstart"},!0)),i.emit(r,"playerready")}),i.init(r,this)}return babelHelpers.createClass(e,[{key:"getStateData",value:function(){var e=this.player,a=e.error||{},t=e.mediaElement;return{video_language_code:e.language,video_source_duration:isNaN(t.duration)?void 0:Math.round(1e3*t.duration),video_source_height:t.videoHeight,video_source_width:t.videoWidth,player_is_paused:e.paused,player_playhead_time:this.getPlayheadTime(),player_is_fullscreen:"fullscreen"==e.displayState,player_autoplay_on:e.autoplay,player_preload_on:t.preload,player_width:element.clientWidth,player_height:element.clientHeight,player_language_code:e.language,player_error_code:a.code,player_error_message:a.message}}},{key:"getPlayheadTime",value:function(){return Math.round(1e3*this.player.getCurrentTime())}}],[{key:"create",value:function(a,t){return new Promise(function(i,r){i(new e(a,t,mux))})}}]),e}();akamai.amp.AMP.registerPlugin("mux",a.create),e.Mux=a}(this.akamai.amp.mux=this.akamai.amp.mux||{});
//# sourceMappingURL=akamai/amp/mux/Mux.min.js.map